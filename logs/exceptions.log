{"error":{},"level":"error","message":"uncaughtException: Cannot read property 'bind' of undefined\nTypeError: Cannot read property 'bind' of undefined\n    at new Manage (/Users/nikodem/nodeProjects/tff/controllers/api/ask/ask.js:11:30)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:39:36)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:23:22)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:23:22)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at Server.initRoutes (/Users/nikodem/nodeProjects/tff/server.js:30:16)\n    at new Server (/Users/nikodem/nodeProjects/tff/server.js:16:14)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/server.js:37:18)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)","stack":"TypeError: Cannot read property 'bind' of undefined\n    at new Manage (/Users/nikodem/nodeProjects/tff/controllers/api/ask/ask.js:11:30)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:39:36)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:23:22)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:23:22)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at Server.initRoutes (/Users/nikodem/nodeProjects/tff/server.js:30:16)\n    at new Server (/Users/nikodem/nodeProjects/tff/server.js:16:14)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/server.js:37:18)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)","exception":true,"date":"Wed Mar 14 2018 21:03:30 GMT+0100 (CET)","process":{"pid":32786,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":50323456,"heapTotal":35471360,"heapUsed":19491152,"external":18000315}},"os":{"loadavg":[2.203125,2.0966796875,2.1025390625],"uptime":389520},"trace":[{"column":30,"file":"/Users/nikodem/nodeProjects/tff/controllers/api/ask/ask.js","function":"new Manage","line":11,"method":null,"native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"fs.readdirSync.forEach","line":39,"method":"forEach","native":false},{"column":null,"file":null,"function":"Array.forEach","line":null,"method":"forEach","native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"Router.load","line":16,"method":"load","native":false},{"column":22,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"fs.readdirSync.forEach","line":23,"method":"forEach","native":false},{"column":null,"file":null,"function":"Array.forEach","line":null,"method":"forEach","native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"Router.load","line":16,"method":"load","native":false},{"column":22,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"fs.readdirSync.forEach","line":23,"method":"forEach","native":false},{"column":null,"file":null,"function":"Array.forEach","line":null,"method":"forEach","native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"Router.load","line":16,"method":"load","native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":"Server.initRoutes","line":30,"method":"initRoutes","native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":"new Server","line":16,"method":null,"native":false},{"column":18,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":null,"line":37,"method":null,"native":false},{"column":30,"file":"module.js","function":"Module._compile","line":660,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false}]}
{"error":{},"level":"error","message":"uncaughtException: Cannot read property 'query' of undefined\nTypeError: Cannot read property 'query' of undefined\n    at AskService.getAllLimit (/Users/nikodem/nodeProjects/tff/services/askService.js:113:28)\n    at new Manage (/Users/nikodem/nodeProjects/tff/controllers/api/ask/ask.js:11:23)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:39:36)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:23:22)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:23:22)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at Server.initRoutes (/Users/nikodem/nodeProjects/tff/server.js:30:16)\n    at new Server (/Users/nikodem/nodeProjects/tff/server.js:16:14)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/server.js:37:18)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)","stack":"TypeError: Cannot read property 'query' of undefined\n    at AskService.getAllLimit (/Users/nikodem/nodeProjects/tff/services/askService.js:113:28)\n    at new Manage (/Users/nikodem/nodeProjects/tff/controllers/api/ask/ask.js:11:23)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:39:36)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:23:22)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:23:22)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at Server.initRoutes (/Users/nikodem/nodeProjects/tff/server.js:30:16)\n    at new Server (/Users/nikodem/nodeProjects/tff/server.js:16:14)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/server.js:37:18)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)","exception":true,"date":"Wed Mar 14 2018 21:04:07 GMT+0100 (CET)","process":{"pid":32794,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":50339840,"heapTotal":35471360,"heapUsed":19469280,"external":18000315}},"os":{"loadavg":[2.1748046875,2.10009765625,2.1015625],"uptime":389557},"trace":[{"column":28,"file":"/Users/nikodem/nodeProjects/tff/services/askService.js","function":"AskService.getAllLimit","line":113,"method":"getAllLimit","native":false},{"column":23,"file":"/Users/nikodem/nodeProjects/tff/controllers/api/ask/ask.js","function":"new Manage","line":11,"method":null,"native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"fs.readdirSync.forEach","line":39,"method":"forEach","native":false},{"column":null,"file":null,"function":"Array.forEach","line":null,"method":"forEach","native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"Router.load","line":16,"method":"load","native":false},{"column":22,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"fs.readdirSync.forEach","line":23,"method":"forEach","native":false},{"column":null,"file":null,"function":"Array.forEach","line":null,"method":"forEach","native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"Router.load","line":16,"method":"load","native":false},{"column":22,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"fs.readdirSync.forEach","line":23,"method":"forEach","native":false},{"column":null,"file":null,"function":"Array.forEach","line":null,"method":"forEach","native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"Router.load","line":16,"method":"load","native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":"Server.initRoutes","line":30,"method":"initRoutes","native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":"new Server","line":16,"method":null,"native":false},{"column":18,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":null,"line":37,"method":null,"native":false},{"column":30,"file":"module.js","function":"Module._compile","line":660,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false}]}
{"error":{},"level":"error","message":"uncaughtException: Cannot read property 'query' of undefined\nTypeError: Cannot read property 'query' of undefined\n    at AskService.getAllLimit (/Users/nikodem/nodeProjects/tff/services/askService.js:113:28)\n    at new Manage (/Users/nikodem/nodeProjects/tff/controllers/api/ask/ask.js:11:23)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:39:36)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:23:22)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:23:22)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at Server.initRoutes (/Users/nikodem/nodeProjects/tff/server.js:30:16)\n    at new Server (/Users/nikodem/nodeProjects/tff/server.js:16:14)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/server.js:37:18)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)","stack":"TypeError: Cannot read property 'query' of undefined\n    at AskService.getAllLimit (/Users/nikodem/nodeProjects/tff/services/askService.js:113:28)\n    at new Manage (/Users/nikodem/nodeProjects/tff/controllers/api/ask/ask.js:11:23)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:39:36)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:23:22)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:23:22)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at Server.initRoutes (/Users/nikodem/nodeProjects/tff/server.js:30:16)\n    at new Server (/Users/nikodem/nodeProjects/tff/server.js:16:14)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/server.js:37:18)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)","exception":true,"date":"Wed Mar 14 2018 21:04:23 GMT+0100 (CET)","process":{"pid":32802,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":50987008,"heapTotal":35471360,"heapUsed":19352728,"external":18000315}},"os":{"loadavg":[2.134765625,2.0947265625,2.0986328125],"uptime":389573},"trace":[{"column":28,"file":"/Users/nikodem/nodeProjects/tff/services/askService.js","function":"AskService.getAllLimit","line":113,"method":"getAllLimit","native":false},{"column":23,"file":"/Users/nikodem/nodeProjects/tff/controllers/api/ask/ask.js","function":"new Manage","line":11,"method":null,"native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"fs.readdirSync.forEach","line":39,"method":"forEach","native":false},{"column":null,"file":null,"function":"Array.forEach","line":null,"method":"forEach","native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"Router.load","line":16,"method":"load","native":false},{"column":22,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"fs.readdirSync.forEach","line":23,"method":"forEach","native":false},{"column":null,"file":null,"function":"Array.forEach","line":null,"method":"forEach","native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"Router.load","line":16,"method":"load","native":false},{"column":22,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"fs.readdirSync.forEach","line":23,"method":"forEach","native":false},{"column":null,"file":null,"function":"Array.forEach","line":null,"method":"forEach","native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"Router.load","line":16,"method":"load","native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":"Server.initRoutes","line":30,"method":"initRoutes","native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":"new Server","line":16,"method":null,"native":false},{"column":18,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":null,"line":37,"method":null,"native":false},{"column":30,"file":"module.js","function":"Module._compile","line":660,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false}]}
{"error":{},"level":"error","message":"uncaughtException: size is not defined\nReferenceError: size is not defined\n    at countQuery.count.exec (/Users/nikodem/nodeProjects/tff/services/askService.js:160:18)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js:3930:16\n    at (anonymous function).call (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:3021:7)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/utils.js:418:16\n    at args.push (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:405:72)\n    at handleCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:128:55)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/collection.js:1924:5\n    at args.push (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:405:72)\n    at handleCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:128:55)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/db.js:340:5\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/connection/pool.js:541:18\n    at process._tickCallback (internal/process/next_tick.js:150:11)","stack":"ReferenceError: size is not defined\n    at countQuery.count.exec (/Users/nikodem/nodeProjects/tff/services/askService.js:160:18)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js:3930:16\n    at (anonymous function).call (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:3021:7)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/utils.js:418:16\n    at args.push (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:405:72)\n    at handleCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:128:55)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/collection.js:1924:5\n    at args.push (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:405:72)\n    at handleCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:128:55)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/db.js:340:5\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/connection/pool.js:541:18\n    at process._tickCallback (internal/process/next_tick.js:150:11)","exception":true,"date":"Wed Mar 14 2018 22:21:47 GMT+0100 (CET)","process":{"pid":33592,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":41684992,"heapTotal":21315584,"heapUsed":17704992,"external":17859186}},"os":{"loadavg":[2.40673828125,2.33154296875,2.21044921875],"uptime":394217},"trace":[{"column":18,"file":"/Users/nikodem/nodeProjects/tff/services/askService.js","function":"countQuery.count.exec","line":160,"method":"exec","native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js","function":null,"line":3930,"method":null,"native":false},{"column":7,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js","function":"(anonymous function).call","line":3021,"method":"call","native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/utils.js","function":null,"line":418,"method":null,"native":false},{"column":72,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js","function":"args.push","line":405,"method":"push","native":false},{"column":55,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js","function":"handleCallback","line":128,"method":null,"native":false},{"column":5,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/collection.js","function":null,"line":1924,"method":null,"native":false},{"column":72,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js","function":"args.push","line":405,"method":"push","native":false},{"column":55,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js","function":"handleCallback","line":128,"method":null,"native":false},{"column":5,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/db.js","function":null,"line":340,"method":null,"native":false},{"column":18,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/connection/pool.js","function":null,"line":541,"method":null,"native":false},{"column":11,"file":"internal/process/next_tick.js","function":"process._tickCallback","line":150,"method":"_tickCallback","native":false}]}
error: uncaughtException: Lexical declaration cannot appear in a single-statement context
/Users/nikodem/nodeProjects/tff/services/messageService.js:55
                        let ret = data2.concat(data);
                        ^^^

SyntaxError: Lexical declaration cannot appear in a single-statement context
    at new Script (vm.js:51:7)
    at createScript (vm.js:138:10)
    at Object.runInThisContext (vm.js:199:10)
    at Module._compile (module.js:624:28)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3)
    at Module.require (module.js:604:17)
    at require (internal/module.js:11:18)
    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js:2:22)
    at Module._compile (module.js:660:30)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3) {"error":{},"stack":"/Users/nikodem/nodeProjects/tff/services/messageService.js:55\n                        let ret = data2.concat(data);\n                        ^^^\n\nSyntaxError: Lexical declaration cannot appear in a single-statement context\n    at new Script (vm.js:51:7)\n    at createScript (vm.js:138:10)\n    at Object.runInThisContext (vm.js:199:10)\n    at Module._compile (module.js:624:28)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)\n    at Module.require (module.js:604:17)\n    at require (internal/module.js:11:18)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js:2:22)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)","exception":true,"date":"Fri Mar 16 2018 16:22:45 GMT+0100 (CET)","process":{"pid":44275,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":51490816,"heapTotal":34947072,"heapUsed":20094536,"external":18019608}},"os":{"loadavg":[1.767578125,1.70263671875,1.7392578125],"uptime":545401},"trace":[{"column":7,"file":"vm.js","function":"new Script","line":51,"method":null,"native":false},{"column":10,"file":"vm.js","function":"createScript","line":138,"method":null,"native":false},{"column":10,"file":"vm.js","function":"Object.runInThisContext","line":199,"method":"runInThisContext","native":false},{"column":28,"file":"module.js","function":"Module._compile","line":624,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false},{"column":17,"file":"module.js","function":"Module.require","line":604,"method":"require","native":false},{"column":18,"file":"internal/module.js","function":"require","line":11,"method":null,"native":false},{"column":22,"file":"/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js","function":null,"line":2,"method":null,"native":false},{"column":30,"file":"module.js","function":"Module._compile","line":660,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false}]}
error: uncaughtException: missing ) after argument list
/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js:14
            messageService.getAll.bind(this)
                                           ^

SyntaxError: missing ) after argument list
    at new Script (vm.js:51:7)
    at createScript (vm.js:138:10)
    at Object.runInThisContext (vm.js:199:10)
    at Module._compile (module.js:624:28)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3)
    at Module.require (module.js:604:17)
    at require (internal/module.js:11:18)
    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:38:41)
    at Array.forEach (<anonymous>)
    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)
    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:23:22)
    at Array.forEach (<anonymous>)
    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36) {"error":{},"stack":"/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js:14\n            messageService.getAll.bind(this)\n                                           ^\n\nSyntaxError: missing ) after argument list\n    at new Script (vm.js:51:7)\n    at createScript (vm.js:138:10)\n    at Object.runInThisContext (vm.js:199:10)\n    at Module._compile (module.js:624:28)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)\n    at Module.require (module.js:604:17)\n    at require (internal/module.js:11:18)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:38:41)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:23:22)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)","exception":true,"date":"Fri Mar 16 2018 17:57:15 GMT+0100 (CET)","process":{"pid":45153,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":51757056,"heapTotal":35471360,"heapUsed":19964392,"external":18017877}},"os":{"loadavg":[1.79443359375,1.8134765625,1.84765625],"uptime":551059},"trace":[{"column":7,"file":"vm.js","function":"new Script","line":51,"method":null,"native":false},{"column":10,"file":"vm.js","function":"createScript","line":138,"method":null,"native":false},{"column":10,"file":"vm.js","function":"Object.runInThisContext","line":199,"method":"runInThisContext","native":false},{"column":28,"file":"module.js","function":"Module._compile","line":624,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false},{"column":17,"file":"module.js","function":"Module.require","line":604,"method":"require","native":false},{"column":18,"file":"internal/module.js","function":"require","line":11,"method":null,"native":false},{"column":41,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"fs.readdirSync.forEach","line":38,"method":"forEach","native":false},{"column":null,"file":null,"function":"Array.forEach","line":null,"method":"forEach","native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"Router.load","line":16,"method":"load","native":false},{"column":22,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"fs.readdirSync.forEach","line":23,"method":"forEach","native":false},{"column":null,"file":null,"function":"Array.forEach","line":null,"method":"forEach","native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"Router.load","line":16,"method":"load","native":false}]}
error: uncaughtException: Cannot read property 'username' of undefined
TypeError: Cannot read property 'username' of undefined
    at User.findById (/Users/nikodem/nodeProjects/tff/services/userService.js:89:44)
    at /Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js:3930:16
    at _init (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:2000:14)
    at completeOne (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1995:5)
    at Immediate.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1520:11)
    at Immediate.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/mquery/lib/utils.js:119:16)
    at runCallback (timers.js:756:18)
    at tryOnImmediate (timers.js:717:5)
    at processImmediate [as _immediateCallback] (timers.js:697:5) {"error":{},"stack":"TypeError: Cannot read property 'username' of undefined\n    at User.findById (/Users/nikodem/nodeProjects/tff/services/userService.js:89:44)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js:3930:16\n    at _init (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:2000:14)\n    at completeOne (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1995:5)\n    at Immediate.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1520:11)\n    at Immediate.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/mquery/lib/utils.js:119:16)\n    at runCallback (timers.js:756:18)\n    at tryOnImmediate (timers.js:717:5)\n    at processImmediate [as _immediateCallback] (timers.js:697:5)","exception":true,"date":"Fri Mar 16 2018 18:18:44 GMT+0100 (CET)","process":{"pid":45351,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":52965376,"heapTotal":35471360,"heapUsed":18438984,"external":18036258}},"os":{"loadavg":[1.88623046875,1.97021484375,1.9189453125],"uptime":552348},"trace":[{"column":44,"file":"/Users/nikodem/nodeProjects/tff/services/userService.js","function":"User.findById","line":89,"method":"findById","native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js","function":null,"line":3930,"method":null,"native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js","function":"_init","line":2000,"method":null,"native":false},{"column":5,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js","function":"completeOne","line":1995,"method":null,"native":false},{"column":11,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js","function":null,"line":1520,"method":null,"native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mquery/lib/utils.js","function":null,"line":119,"method":null,"native":false},{"column":18,"file":"timers.js","function":"runCallback","line":756,"method":null,"native":false},{"column":5,"file":"timers.js","function":"tryOnImmediate","line":717,"method":null,"native":false},{"column":5,"file":"timers.js","function":"processImmediate [as _immediateCallback]","line":697,"method":null,"native":false}]}
error: uncaughtException: Cannot read property 'username' of undefined
TypeError: Cannot read property 'username' of undefined
    at User.findById (/Users/nikodem/nodeProjects/tff/services/userService.js:90:44)
    at /Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js:3930:16
    at _init (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:2000:14)
    at completeOne (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1995:5)
    at Immediate.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1520:11)
    at Immediate.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/mquery/lib/utils.js:119:16)
    at runCallback (timers.js:756:18)
    at tryOnImmediate (timers.js:717:5)
    at processImmediate [as _immediateCallback] (timers.js:697:5) {"error":{},"stack":"TypeError: Cannot read property 'username' of undefined\n    at User.findById (/Users/nikodem/nodeProjects/tff/services/userService.js:90:44)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js:3930:16\n    at _init (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:2000:14)\n    at completeOne (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1995:5)\n    at Immediate.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1520:11)\n    at Immediate.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/mquery/lib/utils.js:119:16)\n    at runCallback (timers.js:756:18)\n    at tryOnImmediate (timers.js:717:5)\n    at processImmediate [as _immediateCallback] (timers.js:697:5)","exception":true,"date":"Fri Mar 16 2018 18:21:56 GMT+0100 (CET)","process":{"pid":45379,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":40689664,"heapTotal":20791296,"heapUsed":17200912,"external":17852964}},"os":{"loadavg":[1.91015625,1.9326171875,1.91015625],"uptime":552540},"trace":[{"column":44,"file":"/Users/nikodem/nodeProjects/tff/services/userService.js","function":"User.findById","line":90,"method":"findById","native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js","function":null,"line":3930,"method":null,"native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js","function":"_init","line":2000,"method":null,"native":false},{"column":5,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js","function":"completeOne","line":1995,"method":null,"native":false},{"column":11,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js","function":null,"line":1520,"method":null,"native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mquery/lib/utils.js","function":null,"line":119,"method":null,"native":false},{"column":18,"file":"timers.js","function":"runCallback","line":756,"method":null,"native":false},{"column":5,"file":"timers.js","function":"tryOnImmediate","line":717,"method":null,"native":false},{"column":5,"file":"timers.js","function":"processImmediate [as _immediateCallback]","line":697,"method":null,"native":false}]}
error: uncaughtException: Cannot read property 'username' of undefined
TypeError: Cannot read property 'username' of undefined
    at User.findById (/Users/nikodem/nodeProjects/tff/services/userService.js:90:44)
    at /Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js:3930:16
    at _init (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:2000:14)
    at completeOne (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1995:5)
    at Immediate.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1520:11)
    at Immediate.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/mquery/lib/utils.js:119:16)
    at runCallback (timers.js:756:18)
    at tryOnImmediate (timers.js:717:5)
    at processImmediate [as _immediateCallback] (timers.js:697:5) {"error":{},"stack":"TypeError: Cannot read property 'username' of undefined\n    at User.findById (/Users/nikodem/nodeProjects/tff/services/userService.js:90:44)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js:3930:16\n    at _init (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:2000:14)\n    at completeOne (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1995:5)\n    at Immediate.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1520:11)\n    at Immediate.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/mquery/lib/utils.js:119:16)\n    at runCallback (timers.js:756:18)\n    at tryOnImmediate (timers.js:717:5)\n    at processImmediate [as _immediateCallback] (timers.js:697:5)","exception":true,"date":"Fri Mar 16 2018 18:23:25 GMT+0100 (CET)","process":{"pid":45393,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":51781632,"heapTotal":35471360,"heapUsed":18433872,"external":18036333}},"os":{"loadavg":[1.453125,1.79541015625,1.85986328125],"uptime":552629},"trace":[{"column":44,"file":"/Users/nikodem/nodeProjects/tff/services/userService.js","function":"User.findById","line":90,"method":"findById","native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js","function":null,"line":3930,"method":null,"native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js","function":"_init","line":2000,"method":null,"native":false},{"column":5,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js","function":"completeOne","line":1995,"method":null,"native":false},{"column":11,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js","function":null,"line":1520,"method":null,"native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mquery/lib/utils.js","function":null,"line":119,"method":null,"native":false},{"column":18,"file":"timers.js","function":"runCallback","line":756,"method":null,"native":false},{"column":5,"file":"timers.js","function":"tryOnImmediate","line":717,"method":null,"native":false},{"column":5,"file":"timers.js","function":"processImmediate [as _immediateCallback]","line":697,"method":null,"native":false}]}
error: uncaughtException: Cannot read property 'username' of undefined
TypeError: Cannot read property 'username' of undefined
    at User.findById (/Users/nikodem/nodeProjects/tff/services/userService.js:90:44)
    at /Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js:3930:16
    at _init (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:2000:14)
    at completeOne (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1995:5)
    at Immediate.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1520:11)
    at Immediate.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/mquery/lib/utils.js:119:16)
    at runCallback (timers.js:756:18)
    at tryOnImmediate (timers.js:717:5)
    at processImmediate [as _immediateCallback] (timers.js:697:5) {"error":{},"stack":"TypeError: Cannot read property 'username' of undefined\n    at User.findById (/Users/nikodem/nodeProjects/tff/services/userService.js:90:44)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js:3930:16\n    at _init (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:2000:14)\n    at completeOne (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1995:5)\n    at Immediate.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1520:11)\n    at Immediate.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/mquery/lib/utils.js:119:16)\n    at runCallback (timers.js:756:18)\n    at tryOnImmediate (timers.js:717:5)\n    at processImmediate [as _immediateCallback] (timers.js:697:5)","exception":true,"date":"Fri Mar 16 2018 18:25:15 GMT+0100 (CET)","process":{"pid":45423,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":52895744,"heapTotal":35995648,"heapUsed":18427568,"external":18036536}},"os":{"loadavg":[2.11279296875,1.88134765625,1.87744140625],"uptime":552739},"trace":[{"column":44,"file":"/Users/nikodem/nodeProjects/tff/services/userService.js","function":"User.findById","line":90,"method":"findById","native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js","function":null,"line":3930,"method":null,"native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js","function":"_init","line":2000,"method":null,"native":false},{"column":5,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js","function":"completeOne","line":1995,"method":null,"native":false},{"column":11,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js","function":null,"line":1520,"method":null,"native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mquery/lib/utils.js","function":null,"line":119,"method":null,"native":false},{"column":18,"file":"timers.js","function":"runCallback","line":756,"method":null,"native":false},{"column":5,"file":"timers.js","function":"tryOnImmediate","line":717,"method":null,"native":false},{"column":5,"file":"timers.js","function":"processImmediate [as _immediateCallback]","line":697,"method":null,"native":false}]}
error: uncaughtException: Unexpected token if
/Users/nikodem/nodeProjects/tff/services/userService.js:97
                   if(element._id.equals(messages[messages.length - 1]._id)){
                   ^^

SyntaxError: Unexpected token if
    at new Script (vm.js:51:7)
    at createScript (vm.js:138:10)
    at Object.runInThisContext (vm.js:199:10)
    at Module._compile (module.js:624:28)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3)
    at Module.require (module.js:604:17)
    at require (internal/module.js:11:18)
    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js:3:19)
    at Module._compile (module.js:660:30)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3) {"error":{},"stack":"/Users/nikodem/nodeProjects/tff/services/userService.js:97\n                   if(element._id.equals(messages[messages.length - 1]._id)){\n                   ^^\n\nSyntaxError: Unexpected token if\n    at new Script (vm.js:51:7)\n    at createScript (vm.js:138:10)\n    at Object.runInThisContext (vm.js:199:10)\n    at Module._compile (module.js:624:28)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)\n    at Module.require (module.js:604:17)\n    at require (internal/module.js:11:18)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js:3:19)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)","exception":true,"date":"Fri Mar 16 2018 18:30:10 GMT+0100 (CET)","process":{"pid":45484,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":51855360,"heapTotal":35471360,"heapUsed":19880832,"external":18030470}},"os":{"loadavg":[1.71044921875,1.806640625,1.83544921875],"uptime":553034},"trace":[{"column":7,"file":"vm.js","function":"new Script","line":51,"method":null,"native":false},{"column":10,"file":"vm.js","function":"createScript","line":138,"method":null,"native":false},{"column":10,"file":"vm.js","function":"Object.runInThisContext","line":199,"method":"runInThisContext","native":false},{"column":28,"file":"module.js","function":"Module._compile","line":624,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false},{"column":17,"file":"module.js","function":"Module.require","line":604,"method":"require","native":false},{"column":18,"file":"internal/module.js","function":"require","line":11,"method":null,"native":false},{"column":19,"file":"/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js","function":null,"line":3,"method":null,"native":false},{"column":30,"file":"module.js","function":"Module._compile","line":660,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false}]}
error: uncaughtException: Unexpected token {
/Users/nikodem/nodeProjects/tff/services/userService.js:97
                   if(element._id.equals(messages[messages.length - 1]._id)){
                                                                            ^

SyntaxError: Unexpected token {
    at new Script (vm.js:51:7)
    at createScript (vm.js:138:10)
    at Object.runInThisContext (vm.js:199:10)
    at Module._compile (module.js:624:28)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3)
    at Module.require (module.js:604:17)
    at require (internal/module.js:11:18)
    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js:3:19)
    at Module._compile (module.js:660:30)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3) {"error":{},"stack":"/Users/nikodem/nodeProjects/tff/services/userService.js:97\n                   if(element._id.equals(messages[messages.length - 1]._id)){\n                                                                            ^\n\nSyntaxError: Unexpected token {\n    at new Script (vm.js:51:7)\n    at createScript (vm.js:138:10)\n    at Object.runInThisContext (vm.js:199:10)\n    at Module._compile (module.js:624:28)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)\n    at Module.require (module.js:604:17)\n    at require (internal/module.js:11:18)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js:3:19)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)","exception":true,"date":"Fri Mar 16 2018 18:30:29 GMT+0100 (CET)","process":{"pid":45491,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":50950144,"heapTotal":33898496,"heapUsed":20069712,"external":18022283}},"os":{"loadavg":[1.70068359375,1.80078125,1.83154296875],"uptime":553053},"trace":[{"column":7,"file":"vm.js","function":"new Script","line":51,"method":null,"native":false},{"column":10,"file":"vm.js","function":"createScript","line":138,"method":null,"native":false},{"column":10,"file":"vm.js","function":"Object.runInThisContext","line":199,"method":"runInThisContext","native":false},{"column":28,"file":"module.js","function":"Module._compile","line":624,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false},{"column":17,"file":"module.js","function":"Module.require","line":604,"method":"require","native":false},{"column":18,"file":"internal/module.js","function":"require","line":11,"method":null,"native":false},{"column":19,"file":"/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js","function":null,"line":3,"method":null,"native":false},{"column":30,"file":"module.js","function":"Module._compile","line":660,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false}]}
error: uncaughtException: Unexpected token {
/Users/nikodem/nodeProjects/tff/services/userService.js:97
                   if(element._id.equals(messages[messages.length - 1]._id)){
                                                                            ^

SyntaxError: Unexpected token {
    at new Script (vm.js:51:7)
    at createScript (vm.js:138:10)
    at Object.runInThisContext (vm.js:199:10)
    at Module._compile (module.js:624:28)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3)
    at Module.require (module.js:604:17)
    at require (internal/module.js:11:18)
    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js:3:19)
    at Module._compile (module.js:660:30)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3) {"error":{},"stack":"/Users/nikodem/nodeProjects/tff/services/userService.js:97\n                   if(element._id.equals(messages[messages.length - 1]._id)){\n                                                                            ^\n\nSyntaxError: Unexpected token {\n    at new Script (vm.js:51:7)\n    at createScript (vm.js:138:10)\n    at Object.runInThisContext (vm.js:199:10)\n    at Module._compile (module.js:624:28)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)\n    at Module.require (module.js:604:17)\n    at require (internal/module.js:11:18)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js:3:19)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)","exception":true,"date":"Fri Mar 16 2018 18:31:10 GMT+0100 (CET)","process":{"pid":45501,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":51884032,"heapTotal":34947072,"heapUsed":20127472,"external":18030479}},"os":{"loadavg":[1.70654296875,1.79150390625,1.82666015625],"uptime":553094},"trace":[{"column":7,"file":"vm.js","function":"new Script","line":51,"method":null,"native":false},{"column":10,"file":"vm.js","function":"createScript","line":138,"method":null,"native":false},{"column":10,"file":"vm.js","function":"Object.runInThisContext","line":199,"method":"runInThisContext","native":false},{"column":28,"file":"module.js","function":"Module._compile","line":624,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false},{"column":17,"file":"module.js","function":"Module.require","line":604,"method":"require","native":false},{"column":18,"file":"internal/module.js","function":"require","line":11,"method":null,"native":false},{"column":19,"file":"/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js","function":null,"line":3,"method":null,"native":false},{"column":30,"file":"module.js","function":"Module._compile","line":660,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false}]}
error: uncaughtException: missing ) after argument list
/Users/nikodem/nodeProjects/tff/services/messageService.js:109
                Object.keys(messages[0]_doc).forEach(el => console.log(el));
                                      ^

SyntaxError: missing ) after argument list
    at new Script (vm.js:51:7)
    at createScript (vm.js:138:10)
    at Object.runInThisContext (vm.js:199:10)
    at Module._compile (module.js:624:28)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3)
    at Module.require (module.js:604:17)
    at require (internal/module.js:11:18)
    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js:2:22)
    at Module._compile (module.js:660:30)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3) {"error":{},"stack":"/Users/nikodem/nodeProjects/tff/services/messageService.js:109\n                Object.keys(messages[0]_doc).forEach(el => console.log(el));\n                                      ^\n\nSyntaxError: missing ) after argument list\n    at new Script (vm.js:51:7)\n    at createScript (vm.js:138:10)\n    at Object.runInThisContext (vm.js:199:10)\n    at Module._compile (module.js:624:28)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)\n    at Module.require (module.js:604:17)\n    at require (internal/module.js:11:18)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js:2:22)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)","exception":true,"date":"Fri Mar 16 2018 20:12:10 GMT+0100 (CET)","process":{"pid":46445,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":51269632,"heapTotal":34947072,"heapUsed":19921224,"external":18026069}},"os":{"loadavg":[2.07373046875,1.9775390625,1.92333984375],"uptime":559154},"trace":[{"column":7,"file":"vm.js","function":"new Script","line":51,"method":null,"native":false},{"column":10,"file":"vm.js","function":"createScript","line":138,"method":null,"native":false},{"column":10,"file":"vm.js","function":"Object.runInThisContext","line":199,"method":"runInThisContext","native":false},{"column":28,"file":"module.js","function":"Module._compile","line":624,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false},{"column":17,"file":"module.js","function":"Module.require","line":604,"method":"require","native":false},{"column":18,"file":"internal/module.js","function":"require","line":11,"method":null,"native":false},{"column":22,"file":"/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js","function":null,"line":2,"method":null,"native":false},{"column":30,"file":"module.js","function":"Module._compile","line":660,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false}]}
error: uncaughtException: Missing initializer in const declaration
/Users/nikodem/nodeProjects/tff/models/rate.js:1
(function (exports, require, module, __filename, __dirname) { const mongoose = require('mongoose'),g
                                                                                                   ^

SyntaxError: Missing initializer in const declaration
    at new Script (vm.js:51:7)
    at createScript (vm.js:138:10)
    at Object.runInThisContext (vm.js:199:10)
    at Module._compile (module.js:624:28)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3)
    at Module.require (module.js:604:17)
    at require (internal/module.js:11:18)
    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/services/userService.js:5:12)
    at Module._compile (module.js:660:30)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3) {"error":{},"stack":"/Users/nikodem/nodeProjects/tff/models/rate.js:1\n(function (exports, require, module, __filename, __dirname) { const mongoose = require('mongoose'),g\n                                                                                                   ^\n\nSyntaxError: Missing initializer in const declaration\n    at new Script (vm.js:51:7)\n    at createScript (vm.js:138:10)\n    at Object.runInThisContext (vm.js:199:10)\n    at Module._compile (module.js:624:28)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)\n    at Module.require (module.js:604:17)\n    at require (internal/module.js:11:18)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/services/userService.js:5:12)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)","exception":true,"date":"Sat Mar 17 2018 13:59:22 GMT+0100 (CET)","process":{"pid":1182,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":51490816,"heapTotal":34947072,"heapUsed":19987488,"external":18026493}},"os":{"loadavg":[2.21142578125,2.05908203125,1.88623046875],"uptime":16075},"trace":[{"column":7,"file":"vm.js","function":"new Script","line":51,"method":null,"native":false},{"column":10,"file":"vm.js","function":"createScript","line":138,"method":null,"native":false},{"column":10,"file":"vm.js","function":"Object.runInThisContext","line":199,"method":"runInThisContext","native":false},{"column":28,"file":"module.js","function":"Module._compile","line":624,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false},{"column":17,"file":"module.js","function":"Module.require","line":604,"method":"require","native":false},{"column":18,"file":"internal/module.js","function":"require","line":11,"method":null,"native":false},{"column":12,"file":"/Users/nikodem/nodeProjects/tff/services/userService.js","function":null,"line":5,"method":null,"native":false},{"column":30,"file":"module.js","function":"Module._compile","line":660,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false}]}
error: uncaughtException: data.save is not a function
TypeError: data.save is not a function
    at Rate.find (/Users/nikodem/nodeProjects/tff/services/rateService.js:34:26)
    at /Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js:3930:16
    at cb (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1314:14)
    at args.push (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:405:72)
    at handleCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:128:55)
    at self.close (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js:934:60)
    at handleCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:128:55)
    at completeClose (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js:1073:14)
    at Cursor.close (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js:1086:10)
    at /Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js:934:21
    at handleCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js:178:5)
    at setCursorNotified (/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js:555:3)
    at /Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js:664:16
    at queryCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js:242:16)
    at /Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/connection/pool.js:541:18
    at process._tickCallback (internal/process/next_tick.js:150:11) {"error":{},"stack":"TypeError: data.save is not a function\n    at Rate.find (/Users/nikodem/nodeProjects/tff/services/rateService.js:34:26)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js:3930:16\n    at cb (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1314:14)\n    at args.push (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:405:72)\n    at handleCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:128:55)\n    at self.close (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js:934:60)\n    at handleCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:128:55)\n    at completeClose (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js:1073:14)\n    at Cursor.close (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js:1086:10)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js:934:21\n    at handleCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js:178:5)\n    at setCursorNotified (/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js:555:3)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js:664:16\n    at queryCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js:242:16)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/connection/pool.js:541:18\n    at process._tickCallback (internal/process/next_tick.js:150:11)","exception":true,"date":"Sat Mar 17 2018 14:01:43 GMT+0100 (CET)","process":{"pid":1214,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":52297728,"heapTotal":35995648,"heapUsed":18978800,"external":18126349}},"os":{"loadavg":[1.943359375,2.02587890625,1.89990234375],"uptime":16216},"trace":[{"column":26,"file":"/Users/nikodem/nodeProjects/tff/services/rateService.js","function":"Rate.find","line":34,"method":"find","native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js","function":null,"line":3930,"method":null,"native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js","function":"cb","line":1314,"method":null,"native":false},{"column":72,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js","function":"args.push","line":405,"method":"push","native":false},{"column":55,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js","function":"handleCallback","line":128,"method":null,"native":false},{"column":60,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js","function":"self.close","line":934,"method":"close","native":false},{"column":55,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js","function":"handleCallback","line":128,"method":null,"native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js","function":"completeClose","line":1073,"method":null,"native":false},{"column":10,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js","function":"Cursor.close","line":1086,"method":"close","native":false},{"column":21,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js","function":null,"line":934,"method":null,"native":false},{"column":5,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js","function":"handleCallback","line":178,"method":null,"native":false},{"column":3,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js","function":"setCursorNotified","line":555,"method":null,"native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js","function":null,"line":664,"method":null,"native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js","function":"queryCallback","line":242,"method":null,"native":false},{"column":18,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/connection/pool.js","function":null,"line":541,"method":null,"native":false},{"column":11,"file":"internal/process/next_tick.js","function":"process._tickCallback","line":150,"method":"_tickCallback","native":false}]}
error: uncaughtException: data.save is not a function
TypeError: data.save is not a function
    at Rate.find (/Users/nikodem/nodeProjects/tff/services/rateService.js:36:26)
    at /Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js:3930:16
    at cb (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1314:14)
    at args.push (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:405:72)
    at handleCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:128:55)
    at self.close (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js:934:60)
    at handleCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:128:55)
    at completeClose (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js:1073:14)
    at Cursor.close (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js:1086:10)
    at /Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js:934:21
    at handleCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js:178:5)
    at setCursorNotified (/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js:555:3)
    at /Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js:664:16
    at queryCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js:242:16)
    at /Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/connection/pool.js:541:18
    at process._tickCallback (internal/process/next_tick.js:150:11) {"error":{},"stack":"TypeError: data.save is not a function\n    at Rate.find (/Users/nikodem/nodeProjects/tff/services/rateService.js:36:26)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js:3930:16\n    at cb (/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js:1314:14)\n    at args.push (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:405:72)\n    at handleCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:128:55)\n    at self.close (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js:934:60)\n    at handleCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js:128:55)\n    at completeClose (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js:1073:14)\n    at Cursor.close (/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js:1086:10)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js:934:21\n    at handleCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js:178:5)\n    at setCursorNotified (/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js:555:3)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js:664:16\n    at queryCallback (/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js:242:16)\n    at /Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/connection/pool.js:541:18\n    at process._tickCallback (internal/process/next_tick.js:150:11)","exception":true,"date":"Sat Mar 17 2018 14:03:14 GMT+0100 (CET)","process":{"pid":1228,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":52912128,"heapTotal":35995648,"heapUsed":18991936,"external":18126349}},"os":{"loadavg":[2.21044921875,2.0673828125,1.923828125],"uptime":16307},"trace":[{"column":26,"file":"/Users/nikodem/nodeProjects/tff/services/rateService.js","function":"Rate.find","line":36,"method":"find","native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/model.js","function":null,"line":3930,"method":null,"native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongoose/lib/query.js","function":"cb","line":1314,"method":null,"native":false},{"column":72,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js","function":"args.push","line":405,"method":"push","native":false},{"column":55,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js","function":"handleCallback","line":128,"method":null,"native":false},{"column":60,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js","function":"self.close","line":934,"method":"close","native":false},{"column":55,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/utils.js","function":"handleCallback","line":128,"method":null,"native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js","function":"completeClose","line":1073,"method":null,"native":false},{"column":10,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js","function":"Cursor.close","line":1086,"method":"close","native":false},{"column":21,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb/lib/cursor.js","function":null,"line":934,"method":null,"native":false},{"column":5,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js","function":"handleCallback","line":178,"method":null,"native":false},{"column":3,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js","function":"setCursorNotified","line":555,"method":null,"native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js","function":null,"line":664,"method":null,"native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/cursor.js","function":"queryCallback","line":242,"method":null,"native":false},{"column":18,"file":"/Users/nikodem/nodeProjects/tff/node_modules/mongodb-core/lib/connection/pool.js","function":null,"line":541,"method":null,"native":false},{"column":11,"file":"internal/process/next_tick.js","function":"process._tickCallback","line":150,"method":"_tickCallback","native":false}]}
error: uncaughtException: Cannot find module '../../../services/rateService'
Error: Cannot find module '../../../services/rateService'
    at Function.Module._resolveFilename (module.js:555:15)
    at Function.Module._load (module.js:482:25)
    at Module.require (module.js:604:17)
    at require (internal/module.js:11:18)
    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/gulpfile.js:16:19)
    at Module._compile (module.js:660:30)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3)
    at Module.require (module.js:604:17)
    at require (internal/module.js:11:18)
    at Liftoff.handleArguments (/usr/local/lib/node_modules/gulp/bin/gulp.js:116:3)
    at Liftoff.execute (/usr/local/lib/node_modules/gulp/node_modules/liftoff/index.js:203:12)
    at module.exports (/usr/local/lib/node_modules/gulp/node_modules/flagged-respawn/index.js:51:3)
    at Liftoff.<anonymous> (/usr/local/lib/node_modules/gulp/node_modules/liftoff/index.js:195:5) {"error":{"code":"MODULE_NOT_FOUND"},"stack":"Error: Cannot find module '../../../services/rateService'\n    at Function.Module._resolveFilename (module.js:555:15)\n    at Function.Module._load (module.js:482:25)\n    at Module.require (module.js:604:17)\n    at require (internal/module.js:11:18)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/gulpfile.js:16:19)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)\n    at Module.require (module.js:604:17)\n    at require (internal/module.js:11:18)\n    at Liftoff.handleArguments (/usr/local/lib/node_modules/gulp/bin/gulp.js:116:3)\n    at Liftoff.execute (/usr/local/lib/node_modules/gulp/node_modules/liftoff/index.js:203:12)\n    at module.exports (/usr/local/lib/node_modules/gulp/node_modules/flagged-respawn/index.js:51:3)\n    at Liftoff.<anonymous> (/usr/local/lib/node_modules/gulp/node_modules/liftoff/index.js:195:5)","exception":true,"date":"Sat Mar 17 2018 14:25:08 GMT+0100 (CET)","process":{"pid":1443,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/usr/local/bin/gulp","rate"],"memoryUsage":{"rss":63172608,"heapTotal":39141376,"heapUsed":22752888,"external":18005587}},"os":{"loadavg":[1.8955078125,1.9912109375,1.89501953125],"uptime":17621},"trace":[{"column":15,"file":"module.js","function":"Module._resolveFilename","line":555,"method":"_resolveFilename","native":false},{"column":25,"file":"module.js","function":"Module._load","line":482,"method":"_load","native":false},{"column":17,"file":"module.js","function":"Module.require","line":604,"method":"require","native":false},{"column":18,"file":"internal/module.js","function":"require","line":11,"method":null,"native":false},{"column":19,"file":"/Users/nikodem/nodeProjects/tff/gulpfile.js","function":null,"line":16,"method":null,"native":false},{"column":30,"file":"module.js","function":"Module._compile","line":660,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false},{"column":17,"file":"module.js","function":"Module.require","line":604,"method":"require","native":false},{"column":18,"file":"internal/module.js","function":"require","line":11,"method":null,"native":false},{"column":3,"file":"/usr/local/lib/node_modules/gulp/bin/gulp.js","function":"Liftoff.handleArguments","line":116,"method":"handleArguments","native":false},{"column":12,"file":"/usr/local/lib/node_modules/gulp/node_modules/liftoff/index.js","function":"Liftoff.execute","line":203,"method":"execute","native":false},{"column":3,"file":"/usr/local/lib/node_modules/gulp/node_modules/flagged-respawn/index.js","function":"module.exports","line":51,"method":"exports","native":false},{"column":5,"file":"/usr/local/lib/node_modules/gulp/node_modules/liftoff/index.js","function":null,"line":195,"method":null,"native":false}]}
error: uncaughtException: controllerClass is not a constructor
TypeError: controllerClass is not a constructor
    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:39:36)
    at Array.forEach (<anonymous>)
    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)
    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:23:22)
    at Array.forEach (<anonymous>)
    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)
    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:23:22)
    at Array.forEach (<anonymous>)
    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)
    at Server.initRoutes (/Users/nikodem/nodeProjects/tff/server.js:30:16)
    at new Server (/Users/nikodem/nodeProjects/tff/server.js:16:14)
    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/server.js:37:18)
    at Module._compile (module.js:660:30)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12) {"error":{},"stack":"TypeError: controllerClass is not a constructor\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:39:36)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:23:22)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:23:22)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at Server.initRoutes (/Users/nikodem/nodeProjects/tff/server.js:30:16)\n    at new Server (/Users/nikodem/nodeProjects/tff/server.js:16:14)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/server.js:37:18)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)","exception":true,"date":"Sat Mar 17 2018 14:51:43 GMT+0100 (CET)","process":{"pid":1699,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":51859456,"heapTotal":34947072,"heapUsed":20307432,"external":18038407}},"os":{"loadavg":[1.83154296875,1.8701171875,1.83544921875],"uptime":19216},"trace":[{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"fs.readdirSync.forEach","line":39,"method":"forEach","native":false},{"column":null,"file":null,"function":"Array.forEach","line":null,"method":"forEach","native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"Router.load","line":16,"method":"load","native":false},{"column":22,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"fs.readdirSync.forEach","line":23,"method":"forEach","native":false},{"column":null,"file":null,"function":"Array.forEach","line":null,"method":"forEach","native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"Router.load","line":16,"method":"load","native":false},{"column":22,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"fs.readdirSync.forEach","line":23,"method":"forEach","native":false},{"column":null,"file":null,"function":"Array.forEach","line":null,"method":"forEach","native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"Router.load","line":16,"method":"load","native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":"Server.initRoutes","line":30,"method":"initRoutes","native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":"new Server","line":16,"method":null,"native":false},{"column":18,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":null,"line":37,"method":null,"native":false},{"column":30,"file":"module.js","function":"Module._compile","line":660,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false}]}
error: uncaughtException: Unexpected token )
/Users/nikodem/nodeProjects/tff/services/messageService.js:75
                        ret.sort((el1, el2) => )
                                               ^

SyntaxError: Unexpected token )
    at new Script (vm.js:51:7)
    at createScript (vm.js:138:10)
    at Object.runInThisContext (vm.js:199:10)
    at Module._compile (module.js:624:28)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3)
    at Module.require (module.js:604:17)
    at require (internal/module.js:11:18)
    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js:2:22)
    at Module._compile (module.js:660:30)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3) {"error":{},"stack":"/Users/nikodem/nodeProjects/tff/services/messageService.js:75\n                        ret.sort((el1, el2) => )\n                                               ^\n\nSyntaxError: Unexpected token )\n    at new Script (vm.js:51:7)\n    at createScript (vm.js:138:10)\n    at Object.runInThisContext (vm.js:199:10)\n    at Module._compile (module.js:624:28)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)\n    at Module.require (module.js:604:17)\n    at require (internal/module.js:11:18)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js:2:22)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)","exception":true,"date":"Sat Mar 17 2018 15:51:17 GMT+0100 (CET)","process":{"pid":2220,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":51277824,"heapTotal":35471360,"heapUsed":19847032,"external":18023190}},"os":{"loadavg":[2.1748046875,2.1328125,2.0283203125],"uptime":22790},"trace":[{"column":7,"file":"vm.js","function":"new Script","line":51,"method":null,"native":false},{"column":10,"file":"vm.js","function":"createScript","line":138,"method":null,"native":false},{"column":10,"file":"vm.js","function":"Object.runInThisContext","line":199,"method":"runInThisContext","native":false},{"column":28,"file":"module.js","function":"Module._compile","line":624,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false},{"column":17,"file":"module.js","function":"Module.require","line":604,"method":"require","native":false},{"column":18,"file":"internal/module.js","function":"require","line":11,"method":null,"native":false},{"column":22,"file":"/Users/nikodem/nodeProjects/tff/controllers/api/message/message.js","function":null,"line":2,"method":null,"native":false},{"column":30,"file":"module.js","function":"Module._compile","line":660,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false}]}
