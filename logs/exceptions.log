error: uncaughtException: Cannot find module '../../../services/authService'
Error: Cannot find module '../../../services/authService'
    at Function.Module._resolveFilename (module.js:555:15)
    at Function.Module._load (module.js:482:25)
    at Module.require (module.js:604:17)
    at require (internal/module.js:11:18)
    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/controllers/img.js:1:83)
    at Module._compile (module.js:660:30)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3)
    at Module.require (module.js:604:17)
    at require (internal/module.js:11:18)
    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:38:41)
    at Array.forEach (<anonymous>)
    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)
    at Server.initRoutes (/Users/nikodem/nodeProjects/tff/server.js:30:16) {"error":{"code":"MODULE_NOT_FOUND"},"stack":"Error: Cannot find module '../../../services/authService'\n    at Function.Module._resolveFilename (module.js:555:15)\n    at Function.Module._load (module.js:482:25)\n    at Module.require (module.js:604:17)\n    at require (internal/module.js:11:18)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/controllers/img.js:1:83)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)\n    at Module.require (module.js:604:17)\n    at require (internal/module.js:11:18)\n    at fs.readdirSync.forEach (/Users/nikodem/nodeProjects/tff/routes/routes.js:38:41)\n    at Array.forEach (<anonymous>)\n    at Router.load (/Users/nikodem/nodeProjects/tff/routes/routes.js:16:36)\n    at Server.initRoutes (/Users/nikodem/nodeProjects/tff/server.js:30:16)","exception":true,"date":"Sun Mar 18 2018 19:54:31 GMT+0100 (CET)","process":{"pid":8673,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":51101696,"heapTotal":35471360,"heapUsed":20393056,"external":18036596}},"os":{"loadavg":[1.84521484375,1.84716796875,1.849609375],"uptime":123781},"trace":[{"column":15,"file":"module.js","function":"Module._resolveFilename","line":555,"method":"_resolveFilename","native":false},{"column":25,"file":"module.js","function":"Module._load","line":482,"method":"_load","native":false},{"column":17,"file":"module.js","function":"Module.require","line":604,"method":"require","native":false},{"column":18,"file":"internal/module.js","function":"require","line":11,"method":null,"native":false},{"column":83,"file":"/Users/nikodem/nodeProjects/tff/controllers/img.js","function":null,"line":1,"method":null,"native":false},{"column":30,"file":"module.js","function":"Module._compile","line":660,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false},{"column":17,"file":"module.js","function":"Module.require","line":604,"method":"require","native":false},{"column":18,"file":"internal/module.js","function":"require","line":11,"method":null,"native":false},{"column":41,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"fs.readdirSync.forEach","line":38,"method":"forEach","native":false},{"column":null,"file":null,"function":"Array.forEach","line":null,"method":"forEach","native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/routes/routes.js","function":"Router.load","line":16,"method":"load","native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":"Server.initRoutes","line":30,"method":"initRoutes","native":false}]}
error: uncaughtException: Most middleware (like bodyParser) is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.
Error: Most middleware (like bodyParser) is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.
    at Function.get (/Users/nikodem/nodeProjects/tff/node_modules/express/lib/express.js:108:13)
    at Server.initMiddleware (/Users/nikodem/nodeProjects/tff/server.js:29:25)
    at new Server (/Users/nikodem/nodeProjects/tff/server.js:14:14)
    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/server.js:39:18)
    at Module._compile (module.js:660:30)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3)
    at Function.Module.runMain (module.js:701:10)
    at startup (bootstrap_node.js:193:16)
    at bootstrap_node.js:617:3 {"error":{},"stack":"Error: Most middleware (like bodyParser) is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.\n    at Function.get (/Users/nikodem/nodeProjects/tff/node_modules/express/lib/express.js:108:13)\n    at Server.initMiddleware (/Users/nikodem/nodeProjects/tff/server.js:29:25)\n    at new Server (/Users/nikodem/nodeProjects/tff/server.js:14:14)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/server.js:39:18)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)\n    at Function.Module.runMain (module.js:701:10)\n    at startup (bootstrap_node.js:193:16)\n    at bootstrap_node.js:617:3","exception":true,"date":"Sun Mar 18 2018 20:11:38 GMT+0100 (CET)","process":{"pid":8874,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":49577984,"heapTotal":35471360,"heapUsed":17265032,"external":17873302}},"os":{"loadavg":[1.93798828125,1.7373046875,1.7626953125],"uptime":124808},"trace":[{"column":13,"file":"/Users/nikodem/nodeProjects/tff/node_modules/express/lib/express.js","function":"Function.get","line":108,"method":"get","native":false},{"column":25,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":"Server.initMiddleware","line":29,"method":"initMiddleware","native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":"new Server","line":14,"method":null,"native":false},{"column":18,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":null,"line":39,"method":null,"native":false},{"column":30,"file":"module.js","function":"Module._compile","line":660,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false},{"column":10,"file":"module.js","function":"Module.runMain","line":701,"method":"runMain","native":false},{"column":16,"file":"bootstrap_node.js","function":"startup","line":193,"method":null,"native":false},{"column":3,"file":"bootstrap_node.js","function":null,"line":617,"method":null,"native":false}]}
error: uncaughtException: Cannot read property 'end' of undefined
TypeError: Cannot read property 'end' of undefined
    at IncomingMessage.onend (_stream_readable.js:602:10)
    at Object.onceWrapper (events.js:255:19)
    at IncomingMessage.emit (events.js:165:20)
    at endReadableNT (_stream_readable.js:1101:12)
    at process._tickCallback (internal/process/next_tick.js:152:19) {"error":{},"stack":"TypeError: Cannot read property 'end' of undefined\n    at IncomingMessage.onend (_stream_readable.js:602:10)\n    at Object.onceWrapper (events.js:255:19)\n    at IncomingMessage.emit (events.js:165:20)\n    at endReadableNT (_stream_readable.js:1101:12)\n    at process._tickCallback (internal/process/next_tick.js:152:19)","exception":true,"date":"Sun Mar 18 2018 20:59:38 GMT+0100 (CET)","process":{"pid":9421,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":59314176,"heapTotal":37609472,"heapUsed":19712488,"external":18154220}},"os":{"loadavg":[1.50146484375,1.78125,1.8544921875],"uptime":127688},"trace":[{"column":10,"file":"_stream_readable.js","function":"IncomingMessage.onend","line":602,"method":"onend","native":false},{"column":19,"file":"events.js","function":"Object.onceWrapper","line":255,"method":"onceWrapper","native":false},{"column":20,"file":"events.js","function":"IncomingMessage.emit","line":165,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1101,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process._tickCallback","line":152,"method":"_tickCallback","native":false}]}
error: uncaughtException: Cannot read property 'end' of undefined
TypeError: Cannot read property 'end' of undefined
    at IncomingMessage.onend (_stream_readable.js:602:10)
    at Object.onceWrapper (events.js:255:19)
    at IncomingMessage.emit (events.js:165:20)
    at endReadableNT (_stream_readable.js:1101:12)
    at process._tickCallback (internal/process/next_tick.js:152:19) {"error":{},"stack":"TypeError: Cannot read property 'end' of undefined\n    at IncomingMessage.onend (_stream_readable.js:602:10)\n    at Object.onceWrapper (events.js:255:19)\n    at IncomingMessage.emit (events.js:165:20)\n    at endReadableNT (_stream_readable.js:1101:12)\n    at process._tickCallback (internal/process/next_tick.js:152:19)","exception":true,"date":"Sun Mar 18 2018 21:01:38 GMT+0100 (CET)","process":{"pid":9421,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":47591424,"heapTotal":23453696,"heapUsed":18903624,"external":17871498}},"os":{"loadavg":[1.7861328125,1.80517578125,1.8486328125],"uptime":127808},"trace":[{"column":10,"file":"_stream_readable.js","function":"IncomingMessage.onend","line":602,"method":"onend","native":false},{"column":19,"file":"events.js","function":"Object.onceWrapper","line":255,"method":"onceWrapper","native":false},{"column":20,"file":"events.js","function":"IncomingMessage.emit","line":165,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1101,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process._tickCallback","line":152,"method":"_tickCallback","native":false}]}
error: uncaughtException: EISDIR: illegal operation on a directory, open '/Users/nikodem/nodeProjects/tff/uploads/user/'
Error: EISDIR: illegal operation on a directory, open '/Users/nikodem/nodeProjects/tff/uploads/user/' {"error":{"errno":-21,"code":"EISDIR","syscall":"open","path":"/Users/nikodem/nodeProjects/tff/uploads/user/"},"stack":"Error: EISDIR: illegal operation on a directory, open '/Users/nikodem/nodeProjects/tff/uploads/user/'","exception":true,"date":"Sun Mar 18 2018 21:02:45 GMT+0100 (CET)","process":{"pid":9454,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":48189440,"heapTotal":22405120,"heapUsed":18647248,"external":17859845}},"os":{"loadavg":[1.7119140625,1.77978515625,1.83251953125],"uptime":127875},"trace":[]}
error: uncaughtException: EISDIR: illegal operation on a directory, open '/Users/nikodem/nodeProjects/tff/uploads/user/'
Error: EISDIR: illegal operation on a directory, open '/Users/nikodem/nodeProjects/tff/uploads/user/' {"error":{"errno":-21,"code":"EISDIR","syscall":"open","path":"/Users/nikodem/nodeProjects/tff/uploads/user/"},"stack":"Error: EISDIR: illegal operation on a directory, open '/Users/nikodem/nodeProjects/tff/uploads/user/'","exception":true,"date":"Sun Mar 18 2018 21:04:45 GMT+0100 (CET)","process":{"pid":9454,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":48705536,"heapTotal":22405120,"heapUsed":19221896,"external":17873714}},"os":{"loadavg":[1.68603515625,1.7509765625,1.81494140625],"uptime":127995},"trace":[]}
error: uncaughtException: EISDIR: illegal operation on a directory, open '/Users/nikodem/nodeProjects/tff/uploads/user/'
Error: EISDIR: illegal operation on a directory, open '/Users/nikodem/nodeProjects/tff/uploads/user/' {"error":{"errno":-21,"code":"EISDIR","syscall":"open","path":"/Users/nikodem/nodeProjects/tff/uploads/user/"},"stack":"Error: EISDIR: illegal operation on a directory, open '/Users/nikodem/nodeProjects/tff/uploads/user/'","exception":true,"date":"Sun Mar 18 2018 21:10:39 GMT+0100 (CET)","process":{"pid":9542,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":47263744,"heapTotal":22405120,"heapUsed":18654696,"external":17860484}},"os":{"loadavg":[1.85498046875,1.88232421875,1.8486328125],"uptime":128349},"trace":[]}
error: uncaughtException: EISDIR: illegal operation on a directory, open '/Users/nikodem/nodeProjects/tff/uploads/user/'
Error: EISDIR: illegal operation on a directory, open '/Users/nikodem/nodeProjects/tff/uploads/user/' {"error":{"errno":-21,"code":"EISDIR","syscall":"open","path":"/Users/nikodem/nodeProjects/tff/uploads/user/"},"stack":"Error: EISDIR: illegal operation on a directory, open '/Users/nikodem/nodeProjects/tff/uploads/user/'","exception":true,"date":"Sun Mar 18 2018 21:12:39 GMT+0100 (CET)","process":{"pid":9542,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":47796224,"heapTotal":22405120,"heapUsed":19177600,"external":17873908}},"os":{"loadavg":[1.5361328125,1.72900390625,1.78857421875],"uptime":128469},"trace":[]}
error: uncaughtException: extension.equals is not a function
TypeError: extension.equals is not a function
    at Busboy.req.busboy.on (/Users/nikodem/nodeProjects/tff/services/imagesService.js:16:27)
    at Busboy.emit (events.js:160:13)
    at Busboy.emit (/Users/nikodem/nodeProjects/tff/node_modules/busboy/lib/main.js:38:33)
    at PartStream.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/busboy/lib/types/multipart.js:213:13)
    at PartStream.emit (events.js:160:13)
    at HeaderParser.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js:51:16)
    at HeaderParser.emit (events.js:160:13)
    at HeaderParser._finish (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/HeaderParser.js:68:8)
    at SBMH.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/HeaderParser.js:40:12)
    at SBMH.emit (events.js:160:13)
    at SBMH._sbmh_feed (/Users/nikodem/nodeProjects/tff/node_modules/streamsearch/lib/sbmh.js:159:14)
    at SBMH.push (/Users/nikodem/nodeProjects/tff/node_modules/streamsearch/lib/sbmh.js:56:14)
    at HeaderParser.push (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/HeaderParser.js:46:19)
    at Dicer._oninfo (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js:197:25)
    at SBMH.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js:127:10)
    at SBMH.emit (events.js:160:13) {"error":{},"stack":"TypeError: extension.equals is not a function\n    at Busboy.req.busboy.on (/Users/nikodem/nodeProjects/tff/services/imagesService.js:16:27)\n    at Busboy.emit (events.js:160:13)\n    at Busboy.emit (/Users/nikodem/nodeProjects/tff/node_modules/busboy/lib/main.js:38:33)\n    at PartStream.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/busboy/lib/types/multipart.js:213:13)\n    at PartStream.emit (events.js:160:13)\n    at HeaderParser.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js:51:16)\n    at HeaderParser.emit (events.js:160:13)\n    at HeaderParser._finish (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/HeaderParser.js:68:8)\n    at SBMH.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/HeaderParser.js:40:12)\n    at SBMH.emit (events.js:160:13)\n    at SBMH._sbmh_feed (/Users/nikodem/nodeProjects/tff/node_modules/streamsearch/lib/sbmh.js:159:14)\n    at SBMH.push (/Users/nikodem/nodeProjects/tff/node_modules/streamsearch/lib/sbmh.js:56:14)\n    at HeaderParser.push (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/HeaderParser.js:46:19)\n    at Dicer._oninfo (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js:197:25)\n    at SBMH.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js:127:10)\n    at SBMH.emit (events.js:160:13)","exception":true,"date":"Sun Mar 18 2018 21:31:31 GMT+0100 (CET)","process":{"pid":9797,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":59744256,"heapTotal":37609472,"heapUsed":19955344,"external":18220340}},"os":{"loadavg":[2.39013671875,1.984375,1.8369140625],"uptime":129601},"trace":[{"column":27,"file":"/Users/nikodem/nodeProjects/tff/services/imagesService.js","function":"Busboy.req.busboy.on","line":16,"method":"on","native":false},{"column":13,"file":"events.js","function":"Busboy.emit","line":160,"method":"emit","native":false},{"column":33,"file":"/Users/nikodem/nodeProjects/tff/node_modules/busboy/lib/main.js","function":"Busboy.emit","line":38,"method":"emit","native":false},{"column":13,"file":"/Users/nikodem/nodeProjects/tff/node_modules/busboy/lib/types/multipart.js","function":null,"line":213,"method":null,"native":false},{"column":13,"file":"events.js","function":"PartStream.emit","line":160,"method":"emit","native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js","function":null,"line":51,"method":null,"native":false},{"column":13,"file":"events.js","function":"HeaderParser.emit","line":160,"method":"emit","native":false},{"column":8,"file":"/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/HeaderParser.js","function":"HeaderParser._finish","line":68,"method":"_finish","native":false},{"column":12,"file":"/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/HeaderParser.js","function":null,"line":40,"method":null,"native":false},{"column":13,"file":"events.js","function":"SBMH.emit","line":160,"method":"emit","native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/node_modules/streamsearch/lib/sbmh.js","function":"SBMH._sbmh_feed","line":159,"method":"_sbmh_feed","native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/node_modules/streamsearch/lib/sbmh.js","function":"SBMH.push","line":56,"method":"push","native":false},{"column":19,"file":"/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/HeaderParser.js","function":"HeaderParser.push","line":46,"method":"push","native":false},{"column":25,"file":"/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js","function":"Dicer._oninfo","line":197,"method":"_oninfo","native":false},{"column":10,"file":"/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js","function":null,"line":127,"method":null,"native":false},{"column":13,"file":"events.js","function":"SBMH.emit","line":160,"method":"emit","native":false}]}
error: uncaughtException: limits is not defined
ReferenceError: limits is not defined
    at Server.initMiddleware (/Users/nikodem/nodeProjects/tff/server.js:28:25)
    at new Server (/Users/nikodem/nodeProjects/tff/server.js:14:14)
    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/server.js:38:18)
    at Module._compile (module.js:660:30)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3)
    at Function.Module.runMain (module.js:701:10)
    at startup (bootstrap_node.js:193:16)
    at bootstrap_node.js:617:3 {"error":{},"stack":"ReferenceError: limits is not defined\n    at Server.initMiddleware (/Users/nikodem/nodeProjects/tff/server.js:28:25)\n    at new Server (/Users/nikodem/nodeProjects/tff/server.js:14:14)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/server.js:38:18)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)\n    at Function.Module.runMain (module.js:701:10)\n    at startup (bootstrap_node.js:193:16)\n    at bootstrap_node.js:617:3","exception":true,"date":"Sun Mar 18 2018 21:37:52 GMT+0100 (CET)","process":{"pid":9872,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":55611392,"heapTotal":36077568,"heapUsed":20134288,"external":17956444}},"os":{"loadavg":[2.32373046875,2.12109375,1.951171875],"uptime":129982},"trace":[{"column":25,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":"Server.initMiddleware","line":28,"method":"initMiddleware","native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":"new Server","line":14,"method":null,"native":false},{"column":18,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":null,"line":38,"method":null,"native":false},{"column":30,"file":"module.js","function":"Module._compile","line":660,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false},{"column":10,"file":"module.js","function":"Module.runMain","line":701,"method":"runMain","native":false},{"column":16,"file":"bootstrap_node.js","function":"startup","line":193,"method":null,"native":false},{"column":3,"file":"bootstrap_node.js","function":null,"line":617,"method":null,"native":false}]}
error: uncaughtException: limits is not defined
ReferenceError: limits is not defined
    at Server.initMiddleware (/Users/nikodem/nodeProjects/tff/server.js:28:25)
    at new Server (/Users/nikodem/nodeProjects/tff/server.js:14:14)
    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/server.js:38:18)
    at Module._compile (module.js:660:30)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3)
    at Function.Module.runMain (module.js:701:10)
    at startup (bootstrap_node.js:193:16)
    at bootstrap_node.js:617:3 {"error":{},"stack":"ReferenceError: limits is not defined\n    at Server.initMiddleware (/Users/nikodem/nodeProjects/tff/server.js:28:25)\n    at new Server (/Users/nikodem/nodeProjects/tff/server.js:14:14)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/server.js:38:18)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)\n    at Function.Module.runMain (module.js:701:10)\n    at startup (bootstrap_node.js:193:16)\n    at bootstrap_node.js:617:3","exception":true,"date":"Sun Mar 18 2018 21:44:39 GMT+0100 (CET)","process":{"pid":9929,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":56233984,"heapTotal":36077568,"heapUsed":20440696,"external":17956444}},"os":{"loadavg":[1.68798828125,1.76611328125,1.8203125],"uptime":130389},"trace":[{"column":25,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":"Server.initMiddleware","line":28,"method":"initMiddleware","native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":"new Server","line":14,"method":null,"native":false},{"column":18,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":null,"line":38,"method":null,"native":false},{"column":30,"file":"module.js","function":"Module._compile","line":660,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false},{"column":10,"file":"module.js","function":"Module.runMain","line":701,"method":"runMain","native":false},{"column":16,"file":"bootstrap_node.js","function":"startup","line":193,"method":null,"native":false},{"column":3,"file":"bootstrap_node.js","function":null,"line":617,"method":null,"native":false}]}
error: uncaughtException: limits is not defined
ReferenceError: limits is not defined
    at Server.initMiddleware (/Users/nikodem/nodeProjects/tff/server.js:28:25)
    at new Server (/Users/nikodem/nodeProjects/tff/server.js:14:14)
    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/server.js:38:18)
    at Module._compile (module.js:660:30)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3)
    at Function.Module.runMain (module.js:701:10)
    at startup (bootstrap_node.js:193:16)
    at bootstrap_node.js:617:3 {"error":{},"stack":"ReferenceError: limits is not defined\n    at Server.initMiddleware (/Users/nikodem/nodeProjects/tff/server.js:28:25)\n    at new Server (/Users/nikodem/nodeProjects/tff/server.js:14:14)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/server.js:38:18)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)\n    at Function.Module.runMain (module.js:701:10)\n    at startup (bootstrap_node.js:193:16)\n    at bootstrap_node.js:617:3","exception":true,"date":"Sun Mar 18 2018 21:44:43 GMT+0100 (CET)","process":{"pid":9931,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":56107008,"heapTotal":35553280,"heapUsed":20157336,"external":17956444}},"os":{"loadavg":[1.68798828125,1.76611328125,1.8203125],"uptime":130393},"trace":[{"column":25,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":"Server.initMiddleware","line":28,"method":"initMiddleware","native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":"new Server","line":14,"method":null,"native":false},{"column":18,"file":"/Users/nikodem/nodeProjects/tff/server.js","function":null,"line":38,"method":null,"native":false},{"column":30,"file":"module.js","function":"Module._compile","line":660,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false},{"column":10,"file":"module.js","function":"Module.runMain","line":701,"method":"runMain","native":false},{"column":16,"file":"bootstrap_node.js","function":"startup","line":193,"method":null,"native":false},{"column":3,"file":"bootstrap_node.js","function":null,"line":617,"method":null,"native":false}]}
error: uncaughtException: file.limits is not a function
TypeError: file.limits is not a function
    at Busboy.busboy.on (/Users/nikodem/nodeProjects/tff/services/imagesService.js:25:18)
    at Busboy.emit (events.js:160:13)
    at Busboy.emit (/Users/nikodem/nodeProjects/tff/node_modules/busboy/lib/main.js:38:33)
    at PartStream.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/busboy/lib/types/multipart.js:213:13)
    at PartStream.emit (events.js:160:13)
    at HeaderParser.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js:51:16)
    at HeaderParser.emit (events.js:160:13)
    at HeaderParser._finish (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/HeaderParser.js:68:8)
    at SBMH.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/HeaderParser.js:40:12)
    at SBMH.emit (events.js:160:13)
    at SBMH._sbmh_feed (/Users/nikodem/nodeProjects/tff/node_modules/streamsearch/lib/sbmh.js:159:14)
    at SBMH.push (/Users/nikodem/nodeProjects/tff/node_modules/streamsearch/lib/sbmh.js:56:14)
    at HeaderParser.push (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/HeaderParser.js:46:19)
    at Dicer._oninfo (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js:197:25)
    at SBMH.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js:127:10)
    at SBMH.emit (events.js:160:13) {"error":{},"stack":"TypeError: file.limits is not a function\n    at Busboy.busboy.on (/Users/nikodem/nodeProjects/tff/services/imagesService.js:25:18)\n    at Busboy.emit (events.js:160:13)\n    at Busboy.emit (/Users/nikodem/nodeProjects/tff/node_modules/busboy/lib/main.js:38:33)\n    at PartStream.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/busboy/lib/types/multipart.js:213:13)\n    at PartStream.emit (events.js:160:13)\n    at HeaderParser.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js:51:16)\n    at HeaderParser.emit (events.js:160:13)\n    at HeaderParser._finish (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/HeaderParser.js:68:8)\n    at SBMH.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/HeaderParser.js:40:12)\n    at SBMH.emit (events.js:160:13)\n    at SBMH._sbmh_feed (/Users/nikodem/nodeProjects/tff/node_modules/streamsearch/lib/sbmh.js:159:14)\n    at SBMH.push (/Users/nikodem/nodeProjects/tff/node_modules/streamsearch/lib/sbmh.js:56:14)\n    at HeaderParser.push (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/HeaderParser.js:46:19)\n    at Dicer._oninfo (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js:197:25)\n    at SBMH.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js:127:10)\n    at SBMH.emit (events.js:160:13)","exception":true,"date":"Sun Mar 18 2018 22:01:50 GMT+0100 (CET)","process":{"pid":10142,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":47775744,"heapTotal":22405120,"heapUsed":18681968,"external":18035300}},"os":{"loadavg":[2.32080078125,1.95947265625,1.8798828125],"uptime":131420},"trace":[{"column":18,"file":"/Users/nikodem/nodeProjects/tff/services/imagesService.js","function":"Busboy.busboy.on","line":25,"method":"on","native":false},{"column":13,"file":"events.js","function":"Busboy.emit","line":160,"method":"emit","native":false},{"column":33,"file":"/Users/nikodem/nodeProjects/tff/node_modules/busboy/lib/main.js","function":"Busboy.emit","line":38,"method":"emit","native":false},{"column":13,"file":"/Users/nikodem/nodeProjects/tff/node_modules/busboy/lib/types/multipart.js","function":null,"line":213,"method":null,"native":false},{"column":13,"file":"events.js","function":"PartStream.emit","line":160,"method":"emit","native":false},{"column":16,"file":"/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js","function":null,"line":51,"method":null,"native":false},{"column":13,"file":"events.js","function":"HeaderParser.emit","line":160,"method":"emit","native":false},{"column":8,"file":"/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/HeaderParser.js","function":"HeaderParser._finish","line":68,"method":"_finish","native":false},{"column":12,"file":"/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/HeaderParser.js","function":null,"line":40,"method":null,"native":false},{"column":13,"file":"events.js","function":"SBMH.emit","line":160,"method":"emit","native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/node_modules/streamsearch/lib/sbmh.js","function":"SBMH._sbmh_feed","line":159,"method":"_sbmh_feed","native":false},{"column":14,"file":"/Users/nikodem/nodeProjects/tff/node_modules/streamsearch/lib/sbmh.js","function":"SBMH.push","line":56,"method":"push","native":false},{"column":19,"file":"/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/HeaderParser.js","function":"HeaderParser.push","line":46,"method":"push","native":false},{"column":25,"file":"/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js","function":"Dicer._oninfo","line":197,"method":"_oninfo","native":false},{"column":10,"file":"/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js","function":null,"line":127,"method":null,"native":false},{"column":13,"file":"events.js","function":"SBMH.emit","line":160,"method":"emit","native":false}]}
error: uncaughtException: Cannot set headers after they are sent to the client
Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at validateHeader (_http_outgoing.js:500:11)
    at ServerResponse.setHeader (_http_outgoing.js:507:3)
    at ServerResponse.header (/Users/nikodem/nodeProjects/tff/node_modules/express/lib/response.js:767:10)
    at ServerResponse.send (/Users/nikodem/nodeProjects/tff/node_modules/express/lib/response.js:170:12)
    at FileStream.<anonymous> (/Users/nikodem/nodeProjects/tff/services/imagesService.js:21:44)
    at FileStream.emit (events.js:160:13)
    at addChunk (_stream_readable.js:269:12)
    at readableAddChunk (_stream_readable.js:256:11)
    at FileStream.Readable.push (_stream_readable.js:213:10)
    at PartStream.onData (/Users/nikodem/nodeProjects/tff/node_modules/busboy/lib/types/multipart.js:223:28)
    at PartStream.emit (events.js:160:13)
    at addChunk (_stream_readable.js:269:12)
    at readableAddChunk (_stream_readable.js:256:11)
    at PartStream.Readable.push (_stream_readable.js:213:10)
    at Dicer._oninfo (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js:191:36)
    at SBMH.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js:127:10) {"error":{},"stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at validateHeader (_http_outgoing.js:500:11)\n    at ServerResponse.setHeader (_http_outgoing.js:507:3)\n    at ServerResponse.header (/Users/nikodem/nodeProjects/tff/node_modules/express/lib/response.js:767:10)\n    at ServerResponse.send (/Users/nikodem/nodeProjects/tff/node_modules/express/lib/response.js:170:12)\n    at FileStream.<anonymous> (/Users/nikodem/nodeProjects/tff/services/imagesService.js:21:44)\n    at FileStream.emit (events.js:160:13)\n    at addChunk (_stream_readable.js:269:12)\n    at readableAddChunk (_stream_readable.js:256:11)\n    at FileStream.Readable.push (_stream_readable.js:213:10)\n    at PartStream.onData (/Users/nikodem/nodeProjects/tff/node_modules/busboy/lib/types/multipart.js:223:28)\n    at PartStream.emit (events.js:160:13)\n    at addChunk (_stream_readable.js:269:12)\n    at readableAddChunk (_stream_readable.js:256:11)\n    at PartStream.Readable.push (_stream_readable.js:213:10)\n    at Dicer._oninfo (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js:191:36)\n    at SBMH.<anonymous> (/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js:127:10)","exception":true,"date":"Sun Mar 18 2018 22:09:17 GMT+0100 (CET)","process":{"pid":10249,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":60358656,"heapTotal":37609472,"heapUsed":20090952,"external":18285876}},"os":{"loadavg":[1.72802734375,1.896484375,1.88720703125],"uptime":131867},"trace":[{"column":11,"file":"_http_outgoing.js","function":"validateHeader","line":500,"method":null,"native":false},{"column":3,"file":"_http_outgoing.js","function":"ServerResponse.setHeader","line":507,"method":"setHeader","native":false},{"column":10,"file":"/Users/nikodem/nodeProjects/tff/node_modules/express/lib/response.js","function":"ServerResponse.header","line":767,"method":"header","native":false},{"column":12,"file":"/Users/nikodem/nodeProjects/tff/node_modules/express/lib/response.js","function":"ServerResponse.send","line":170,"method":"send","native":false},{"column":44,"file":"/Users/nikodem/nodeProjects/tff/services/imagesService.js","function":null,"line":21,"method":null,"native":false},{"column":13,"file":"events.js","function":"FileStream.emit","line":160,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"addChunk","line":269,"method":null,"native":false},{"column":11,"file":"_stream_readable.js","function":"readableAddChunk","line":256,"method":null,"native":false},{"column":10,"file":"_stream_readable.js","function":"FileStream.Readable.push","line":213,"method":"push","native":false},{"column":28,"file":"/Users/nikodem/nodeProjects/tff/node_modules/busboy/lib/types/multipart.js","function":"PartStream.onData","line":223,"method":"onData","native":false},{"column":13,"file":"events.js","function":"PartStream.emit","line":160,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"addChunk","line":269,"method":null,"native":false},{"column":11,"file":"_stream_readable.js","function":"readableAddChunk","line":256,"method":null,"native":false},{"column":10,"file":"_stream_readable.js","function":"PartStream.Readable.push","line":213,"method":"push","native":false},{"column":36,"file":"/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js","function":"Dicer._oninfo","line":191,"method":"_oninfo","native":false},{"column":10,"file":"/Users/nikodem/nodeProjects/tff/node_modules/dicer/lib/Dicer.js","function":null,"line":127,"method":null,"native":false}]}
error: uncaughtException: Unexpected identifier
/Users/nikodem/nodeProjects/tff/services/imagesService.js:18
            let extension = filename.split('.')[filename.split('.').length - 1];
                ^^^^^^^^^

SyntaxError: Unexpected identifier
    at new Script (vm.js:51:7)
    at createScript (vm.js:138:10)
    at Object.runInThisContext (vm.js:199:10)
    at Module._compile (module.js:624:28)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3)
    at Module.require (module.js:604:17)
    at require (internal/module.js:11:18)
    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/controllers/api/user/user.js:3:21)
    at Module._compile (module.js:660:30)
    at Object.Module._extensions..js (module.js:671:10)
    at Module.load (module.js:573:32)
    at tryModuleLoad (module.js:513:12)
    at Function.Module._load (module.js:505:3) {"error":{},"stack":"/Users/nikodem/nodeProjects/tff/services/imagesService.js:18\n            let extension = filename.split('.')[filename.split('.').length - 1];\n                ^^^^^^^^^\n\nSyntaxError: Unexpected identifier\n    at new Script (vm.js:51:7)\n    at createScript (vm.js:138:10)\n    at Object.runInThisContext (vm.js:199:10)\n    at Module._compile (module.js:624:28)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)\n    at Module.require (module.js:604:17)\n    at require (internal/module.js:11:18)\n    at Object.<anonymous> (/Users/nikodem/nodeProjects/tff/controllers/api/user/user.js:3:21)\n    at Module._compile (module.js:660:30)\n    at Object.Module._extensions..js (module.js:671:10)\n    at Module.load (module.js:573:32)\n    at tryModuleLoad (module.js:513:12)\n    at Function.Module._load (module.js:505:3)","exception":true,"date":"Sun Mar 18 2018 22:51:49 GMT+0100 (CET)","process":{"pid":10708,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":60035072,"heapTotal":36077568,"heapUsed":23695720,"external":18156925}},"os":{"loadavg":[2.11279296875,1.998046875,1.89501953125],"uptime":134419},"trace":[{"column":7,"file":"vm.js","function":"new Script","line":51,"method":null,"native":false},{"column":10,"file":"vm.js","function":"createScript","line":138,"method":null,"native":false},{"column":10,"file":"vm.js","function":"Object.runInThisContext","line":199,"method":"runInThisContext","native":false},{"column":28,"file":"module.js","function":"Module._compile","line":624,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false},{"column":17,"file":"module.js","function":"Module.require","line":604,"method":"require","native":false},{"column":18,"file":"internal/module.js","function":"require","line":11,"method":null,"native":false},{"column":21,"file":"/Users/nikodem/nodeProjects/tff/controllers/api/user/user.js","function":null,"line":3,"method":null,"native":false},{"column":30,"file":"module.js","function":"Module._compile","line":660,"method":"_compile","native":false},{"column":10,"file":"module.js","function":"Module._extensions..js","line":671,"method":".js","native":false},{"column":32,"file":"module.js","function":"Module.load","line":573,"method":"load","native":false},{"column":12,"file":"module.js","function":"tryModuleLoad","line":513,"method":null,"native":false},{"column":3,"file":"module.js","function":"Module._load","line":505,"method":"_load","native":false}]}
error: uncaughtException: data.pipe is not a function
TypeError: data.pipe is not a function
    at FileStream.<anonymous> (/Users/nikodem/nodeProjects/tff/services/imagesService.js:35:26)
    at FileStream.emit (events.js:165:20)
    at endReadableNT (_stream_readable.js:1101:12)
    at process._tickCallback (internal/process/next_tick.js:152:19) {"error":{},"stack":"TypeError: data.pipe is not a function\n    at FileStream.<anonymous> (/Users/nikodem/nodeProjects/tff/services/imagesService.js:35:26)\n    at FileStream.emit (events.js:165:20)\n    at endReadableNT (_stream_readable.js:1101:12)\n    at process._tickCallback (internal/process/next_tick.js:152:19)","exception":true,"date":"Sun Mar 18 2018 22:54:27 GMT+0100 (CET)","process":{"pid":10759,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":48590848,"heapTotal":22405120,"heapUsed":19460016,"external":19173121}},"os":{"loadavg":[1.6767578125,1.85888671875,1.8515625],"uptime":134577},"trace":[{"column":26,"file":"/Users/nikodem/nodeProjects/tff/services/imagesService.js","function":null,"line":35,"method":null,"native":false},{"column":20,"file":"events.js","function":"FileStream.emit","line":165,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1101,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process._tickCallback","line":152,"method":"_tickCallback","native":false}]}
error: uncaughtException: data.pipe is not a function
TypeError: data.pipe is not a function
    at FileStream.<anonymous> (/Users/nikodem/nodeProjects/tff/services/imagesService.js:35:26)
    at FileStream.emit (events.js:165:20)
    at endReadableNT (_stream_readable.js:1101:12)
    at process._tickCallback (internal/process/next_tick.js:152:19) {"error":{},"stack":"TypeError: data.pipe is not a function\n    at FileStream.<anonymous> (/Users/nikodem/nodeProjects/tff/services/imagesService.js:35:26)\n    at FileStream.emit (events.js:165:20)\n    at endReadableNT (_stream_readable.js:1101:12)\n    at process._tickCallback (internal/process/next_tick.js:152:19)","exception":true,"date":"Sun Mar 18 2018 22:56:27 GMT+0100 (CET)","process":{"pid":10759,"uid":501,"gid":20,"cwd":"/Users/nikodem/nodeProjects/tff","execPath":"/usr/local/bin/node","version":"v9.4.0","argv":["/usr/local/bin/node","/Users/nikodem/nodeProjects/tff/server.js"],"memoryUsage":{"rss":48758784,"heapTotal":22929408,"heapUsed":18892560,"external":19828659}},"os":{"loadavg":[1.6513671875,1.787109375,1.8203125],"uptime":134697},"trace":[{"column":26,"file":"/Users/nikodem/nodeProjects/tff/services/imagesService.js","function":null,"line":35,"method":null,"native":false},{"column":20,"file":"events.js","function":"FileStream.emit","line":165,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1101,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process._tickCallback","line":152,"method":"_tickCallback","native":false}]}
